<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
</head>
<body>
<h1>Qpid message</h1>
<form id="form">
    Host:
    <input id="host" name="host" />
    Port:
    <input id="port" name="port" />
    RoutingKey:
    <input id="key"  name="key" value="#"/>
    <input id="connect" type="button" value="Connect" disabled/>
</form>
<ul id="box" style="height:300px;overflow:auto">
</ul>
<script src="/lib/jquery-2.2.3.min.js" type="text/javascript"></script>
<script>
    var ws = new WebSocket('ws://{{host}}:{{port}}/websocket');
    ws.onopen = function(evt) {
        $('#connect').removeAttr('disabled');
    }
    ws.onmessage = function(evt) {
        $('#box').append("<li>" + evt.data + "</li>");
    }

    $('#form').on("submit", function(e) {
        e.preventDefault();
        var host = $('#host').val().trim();
        var port = $('#port').val().trim();
        var key = $('#key').val()}).trim();

        if (host.length === 0 || port.length === 0 || key.length === 0) {
            alert("input fields cannot be empty");
            return;
        }

        var msg = JSON.stringify({host: host, port: port, key: key});
        ws.send(msg);
        return;
    });

</script>
</body>
</html>